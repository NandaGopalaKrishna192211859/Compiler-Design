%{
#include <stdio.h>
#include <stdlib.h>
%}

DIGIT [0-9]
YEAR (19|20)[0-9]{2}
MONTH (0[1-9]|1[0-2])
DAY (0[1-9]|[1-2][0-9]|3[0-1])

%%

{YEAR}(-|\/){MONTH}(-|\/){DAY}   {
    int year, month, day;
    char separator;
    sscanf(yytext, "%d%c%d%c%d", &year, &separator, &month, &separator, &day);
    if (year >= 1900 && year <= 2024 && month >= 1 && month <= 12 && day >= 1 && day <= 31) {
        printf("Valid DOB: %d-%02d-%02d\n", year, month, day);
    } else {
        printf("Invalid DOB: %s\n", yytext);
    }
}

.|\n {
    /* Ignore all other characters */
}

int yywrap() {
    return 1;  // Signal Flex that there are no more input streams
}

int main() {
    yylex();
    return 0;
}
